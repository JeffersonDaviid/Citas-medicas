<div class="contenedor">
  <h2 class="titulo">Horarios Disponibles</h2>

  <div class="formulario">
    <label for="doctor">Doctor:</label>
    <select id="doctor" [(ngModel)]="doctorSeleccionado" class="input-form">
      <option value="" disabled selected>Seleccione un Doctor</option>
      <option *ngFor="let doctor of doctores" [value]="doctor._id">{{ doctor.nombre }}</option>
    </select>
  </div>


  <div class="formulario">
    <label for="fechaInicio">Fecha Inicio:</label>
    <input type="date" id="fechaInicio" [(ngModel)]="fechaInicioSeleccionada" class="input-form" 
           [min]="minFechaHoy" [max]="maxFechaLimite">
  </div>
  
  <div class="formulario">
    <label for="fechaFin">Fecha Fin:</label>
    <input type="date" id="fechaFin" [(ngModel)]="fechaFinSeleccionada" class="input-form"
          [min]="minFechaHoy" [max]="maxFechaLimite">
  </div>

  <button (click)="getHorario()" class="btn-buscar">Buscar</button>

  <div *ngIf="buscoHorarios">
    <div *ngIf="horarios.length > 0">
      <h3>Horarios Disponibles</h3>
      <div class="resultado">
        <table>
          <thead>
            <tr>
              <th>Hora</th>
              <th *ngFor="let fecha of fechasRango">{{ fecha | date:'EEEE dd/MM'}}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let hora of horasDisponibles">
              <td>{{ hora }}</td>
              <td *ngFor="let fecha of fechasRango" [ngClass]="{
                  'disponible': getEstadoHorario(fecha, hora) === 'Disponible',
                  'ocupado': getEstadoHorario(fecha, hora) === 'Ocupado',
                  'no-disponible': getEstadoHorario(fecha, hora) === 'No Disponible'}">
                {{ getEstadoHorario(fecha, hora) }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>